#!/usr/bin/env ruby
require 'chef/node'
require 'json/pure'
#pass =  "{\"normal\":{\"databag_name\":\"somedatabag\",\"tags\":[],\"passenger\":{\"root_path\":\"/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2\",\"module_path\":\"/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/apache2/mod_passenger.so\"},\"database\":{\"database_name\":\"rails_app\",\"database_user\":\"someuser\",\"password\":\"secret\"},\"apache\":{\"cache_dir\":\"/var/cache/httpd\",\"dir\":\"/etc/httpd\",\"binary\":\"/usr/sbin/httpd\",\"log_dir\":\"/var/log/httpd\",\"user\":\"apache\",\"icondir\":\"/var/www/icons/\"},\"application_name\":\"osss\",\"dns_hostname\":\"example.cloud21cn.com\",\"postgresql\":{\"dir\":\"/var/lib/pgsql/data\"},\"application_directory\":\"/home/rails_app/rails_app_app\"},\"name\":\"i-000FFTpR\",\"override\":{\"databag_name\":\"osss_test\",\"application_name\":\"osss\",\"application_directory\":\"/home/osss\"},\"default\":{\"rails\":{\"max_pool_size\":4,\"version\":false,\"environment\":\"production\"},\"packages\":{\"dist_only\":false},\"passenger\":{\"version\":\"3.0.2\"},\"apache\":{\"traceenable\":\"On\",\"allowed_openids\":[],\"timeout\":300,\"keepaliverequests\":100,\"contact\":\"ops@example.com\",\"servertokens\":\"Prod\",\"prefork\":{\"maxspareservers\":32,\"minspareservers\":16,\"serverlimit\":400,\"startservers\":16,\"maxclients\":400,\"maxrequestsperchild\":10000},\"listen_ports\":[\"80\",\"443\"],\"keepalivetimeout\":5,\"serversignature\":\"On\",\"keepalive\":\"On\",\"worker\":{\"maxsparethreads\":192,\"startservers\":4,\"maxclients\":1024,\"minsparethreads\":64,\"maxrequestsperchild\":0,\"threadsperchild\":64}},\"application_name\":\"app_name\",\"postgresql\":{\"ssl\":\"true\",\"version\":\"8.4\"},\"application_directory\":\"/home/app_dir\",\"app_environment\":\"production\"},\"json_class\":\"Chef::Node\",\"automatic\":{\"kernel\":{\"name\":\"Linux\",\"machine\":\"x86_64\",\"modules\":{\"scsi_mod\":{\"size\":\"197337\",\"refcount\":\"1\"},\"ohci_hcd\":{\"size\":\"56053\",\"refcount\":\"0\"},\"dm_mirror\":{\"size\":\"53321\",\"refcount\":\"0\"},\"dm_multipath\":{\"size\":\"55385\",\"refcount\":\"0\"},\"pcspkr\":{\"size\":\"36289\",\"refcount\":\"0\"},\"dm_mod\":{\"size\":\"100752\",\"refcount\":\"4\"},\"jbd\":{\"size\":\"94257\",\"refcount\":\"1\"},\"xfrm_nalgo\":{\"size\":\"43333\",\"refcount\":\"1\"},\"xenblk\":{\"size\":\"50729\",\"refcount\":\"3\"},\"dm_raid45\":{\"size\":\"98897\",\"refcount\":\"0\"},\"dm_log\":{\"size\":\"44993\",\"refcount\":\"3\"},\"lp\":{\"size\":\"47121\",\"refcount\":\"0\"},\"dm_mem_cache\":{\"size\":\"39617\",\"refcount\":\"1\"},\"parport_pc\":{\"size\":\"62313\",\"refcount\":\"0\"},\"uhci_hcd\":{\"size\":\"57561\",\"refcount\":\"0\"},\"parport\":{\"size\":\"73293\",\"refcount\":\"2\"},\"dm_message\":{\"size\":\"36161\",\"refcount\":\"1\"},\"dm_region_hash\":{\"size\":\"46401\",\"refcount\":\"1\"},\"crypto_api\":{\"size\":\"42945\",\"refcount\":\"1\"},\"xennet\":{\"size\":\"61129\",\"refcount\":\"0\"},\"ipv6\":{\"size\":\"424737\",\"refcount\":\"24\"},\"scsi_dh\":{\"size\":\"41665\",\"refcount\":\"1\"},\"ext3\":{\"size\":\"168401\",\"refcount\":\"2\"},\"ehci_hcd\":{\"size\":\"65869\",\"refcount\":\"0\"}},\"os\":\"GNU/Linux\",\"version\":\"#1 SMP Wed Jan 21 09:07:41 EST 2009\",\"release\":\"2.6.18-128.el5xen\"},\"keys\":{\"ssh\":{\"host_dsa_public\":\"AAAAB3NzaC1kc3MAAACBAPToqqvmfo++9jEtbIIbYIyH14YRogY/AlYemPjzwVJtck0V3+vpRHu9CXcw5XRv/BuTNK/WROwVytKYbHClIaoA/GD0kG8Qyty8Ch/4xEm/+sm8ODc87sayGHkaSnzSxYoL1egFLGki3o4lHEoyjcEyGBBWprohhpm29IH8zoxxAAAAFQD7836a4FbbBgZS/PkbGu2RjnIs7wAAAIBJobHJt43ZfNzW9F1LsVuRT5WqSvPewRybkA9BB+2Gu8+Dly54L1r1rUo6eTwrA4Lvx5p52N+gDb8D7tfTAv9tqjRRl4lAMKpUptIs3iFM3vrH7zU9lvwjwXhpex5avM51x2y5T+Efpd0xs0sQLpHV4dwRHcK8tUU4s31AQU0EKwAAAIA2Rp6JKiIp1Rmyr6S59YSPa/WDMBTFUXsP8ibSlMwI4h/GDX77mt+9WidGaz+H0t9TMVohuVkdk4T2pSXz5Am75QRAjnLmkuPYDKaIZ16Y7S/fw57OyrVXKY5BMexGqQL76p5wSf1nQ2B8UPQh7QsE+N8llM+JKC2pbz5jxc1Gig==\",\"host_rsa_public\":\"AAAAB3NzaC1yc2EAAAABIwAAAQEAvk8czHoGeWxyp0Gy1HeyOw9LTlQthS5NJKzs0S1maCyViZVxR+Gv63EKpB+Ox1XDvBEkAvU6Z25P/7sjJ5V2W3KxSP6mXUTlX+9QYg0swkKw/lIteitiFVDk7iYM787WMkUU1+J+xA2VG76/4kCQsFz2CefBr+U8j8wIeUbOA6JqxU2bYaTXg9Vcy05e9u7aHAC6iH8zzJub3KLo9ORlbmW6bUAyS/tGmoihzmhuztmqW7tC0RuqSMLKH/o5uLAsyC5jhKeG8t692wrePMRd9KxgBimIUJgo91m8doC6g9Dffb04IwEluJKtg8rFEFvW9rCTXcNOWTl413u7Q/EF1Q==\"}},\"dmi\":{\"dmidecode_version\":\"2.7\"},\"fqdn\":\"example.cloud21cn.com\",\"platform_version\":\"5.3\",\"ipaddress\":\"10.19.218.66\",\"command\":{\"ps\":\"ps -ef\"},\"filesystem\":{\"/dev/sda1\":{\"kb_size\":\"5160576\",\"kb_available\":\"2715760\",\"mount_options\":[\"rw\"],\"percent_used\":\"45%\",\"mount\":\"/\",\"fs_type\":\"ext3\",\"kb_used\":\"2182672\"},\"/sys\":{\"mount_options\":[\"rw\"],\"mount\":\"/sys\",\"fs_type\":\"sysfs\"},\"/dev/sda2\":{\"kb_size\":\"5160576\",\"kb_available\":\"4756992\",\"mount_options\":[\"rw\"],\"percent_used\":\"3%\",\"mount\":\"/mnt\",\"fs_type\":\"ext3\",\"kb_used\":\"141440\"},\"proc\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc\",\"fs_type\":\"proc\"},\"none\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc/sys/fs/binfmt_misc\",\"fs_type\":\"binfmt_misc\"},\"/dev/root\":{\"mount_options\":[\"rw\",\"data=ordered\"],\"mount\":\"/\",\"fs_type\":\"ext3\"},\"devpts\":{\"mount_options\":[\"rw\",\"gid=5\",\"mode=620\"],\"mount\":\"/dev/pts\",\"fs_type\":\"devpts\"},\"/proc/bus/usb\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc/bus/usb\",\"fs_type\":\"usbfs\"},\"/proc\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc\",\"fs_type\":\"proc\"},\"sysfs\":{\"mount_options\":[\"rw\"],\"mount\":\"/sys\",\"fs_type\":\"sysfs\"},\"rootfs\":{\"mount_options\":[\"rw\"],\"mount\":\"/\",\"fs_type\":\"rootfs\"},\"tmpfs\":{\"kb_size\":\"262144\",\"kb_available\":\"262144\",\"mount_options\":[\"rw\"],\"percent_used\":\"0%\",\"mount\":\"/dev/shm\",\"fs_type\":\"tmpfs\",\"kb_used\":\"0\"},\"/dev\":{\"mount_options\":[\"rw\"],\"mount\":\"/dev\",\"fs_type\":\"tmpfs\"}},\"counters\":{\"network\":{\"interfaces\":{\"eth0\":{\"tx\":{\"packets\":\"31820\",\"bytes\":\"2919680\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"1000\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"74157\",\"bytes\":\"94057453\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}},\"lo\":{\"tx\":{\"packets\":\"277\",\"bytes\":\"21892\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"0\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"277\",\"bytes\":\"21892\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}},\"sit0\":{\"tx\":{\"packets\":\"0\",\"bytes\":\"0\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"0\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"0\",\"bytes\":\"0\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}}}}},\"idletime_seconds\":11161,\"memory\":{\"dirty\":\"356kB\",\"buffers\":\"24576kB\",\"page_tables\":\"6880kB\",\"vmalloc_used\":\"492kB\",\"high_free\":\"0kB\",\"vmalloc_chunk\":\"34359737875kB\",\"total\":\"524288kB\",\"inactive\":\"116240kB\",\"slab\":\"45044kB\",\"nfs_unstable\":\"0kB\",\"free\":\"114268kB\",\"low_total\":\"524288kB\",\"low_free\":\"114268kB\",\"vmalloc_total\":\"34359738367kB\",\"swap\":{\"total\":\"524280kB\",\"free\":\"518080kB\",\"cached\":\"1348kB\"},\"cached\":\"177928kB\",\"writeback\":\"0kB\",\"anon_pages\":\"122272kB\",\"commit_limit\":\"786424kB\",\"high_total\":\"0kB\",\"active\":\"209696kB\",\"mapped\":\"14604kB\",\"bounce\":\"0kB\",\"committed_as\":\"387584kB\"},\"os\":\"linux\",\"domain\":\"cloud21cn.com\",\"network\":{\"default_interface\":\"eth0\",\"interfaces\":{\"eth0\":{\"number\":\"0\",\"flags\":[\"UP\",\"BROADCAST\",\"RUNNING\",\"MULTICAST\"],\"addresses\":{\"10.19.218.66\":{\"netmask\":\"255.255.255.240\",\"broadcast\":\"10.19.218.79\",\"family\":\"inet\"},\"00:D6:E5:56:10:00\":{\"family\":\"lladdr\"},\"fe80::2d6:e5ff:fe56:1000\":{\"scope\":\"Link\",\"prefixlen\":\"64\",\"family\":\"inet6\"}},\"mtu\":\"1492\",\"type\":\"eth\",\"encapsulation\":\"Ethernet\",\"arp\":{\"10.19.218.65\":\"00:1e:68:c5:d6:da\"}},\"lo\":{\"flags\":[\"UP\",\"LOOPBACK\",\"RUNNING\"],\"addresses\":{\"::1\":{\"scope\":\"Node\",\"prefixlen\":\"128\",\"family\":\"inet6\"},\"127.0.0.1\":{\"netmask\":\"255.0.0.0\",\"family\":\"inet\"}},\"mtu\":\"16436\",\"encapsulation\":\"Loopback\"},\"sit0\":{\"number\":\"0\",\"mtu\":\"1480\",\"type\":\"sit\",\"encapsulation\":\"6to4\"}},\"default_gateway\":\"10.19.218.65\"},\"lsb\":{},\"virtualization\":{\"system\":\"xen\",\"role\":\"guest\"},\"idletime\":\"3 hours 06 minutes 01 seconds\",\"ohai_time\":1316004619.43795,\"chef_packages\":{\"ohai\":{\"ohai_root\":\"/usr/local/lib/ruby/gems/1.9.1/gems/ohai-0.6.4/lib/ohai\",\"version\":\"0.6.4\"},\"chef\":{\"version\":\"0.10.4\",\"chef_root\":\"/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.4/lib\"}},\"current_user\":\"root\",\"languages\":{\"perl\":{\"version\":\"5.8.8\",\"archname\":\"x86_64-linux-thread-multi\"},\"python\":{\"version\":\"2.4.3\",\"builddate\":\"Oct 31 2008, 21:48:23\"},\"ruby\":{\"target_os\":\"linux\",\"bin_dir\":\"/usr/local/bin\",\"target_vendor\":\"unknown\",\"host_vendor\":\"unknown\",\"target_cpu\":\"x86_64\",\"ruby_bin\":\"/usr/local/bin/ruby\",\"version\":\"1.9.2\",\"host_os\":\"linux-gnu\",\"release_date\":\"2011-07-09\",\"target\":\"x86_64-unknown-linux-gnu\",\"host\":\"x86_64-unknown-linux-gnu\",\"host_cpu\":\"x86_64\",\"gems_dir\":\"/usr/local/lib/ruby/gems/1.9.1\",\"platform\":\"x86_64-linux\"}},\"os_version\":\"2.6.18-128.el5xen\",\"recipes\":[\"postgresql::server\",\"postgres_create_database\",\"admin_users\",\"sendmail::default\",\"apache2\",\"passenger_apache2\",\"git::default\",\"hardening::centos\",\"hardening::apache2\",\"rails_app_server::default\",\"osss::default\"],\"hostname\":\"example\",\"uptime\":\"3 hours 12 minutes 56 seconds\",\"cpu\":{\"real\":1,\"total\":1,\"0\":{\"model\":\"23\",\"cores\":\"1\",\"flags\":[\"fpu\",\"tsc\",\"msr\",\"pae\",\"cx8\",\"apic\",\"cmov\",\"pat\",\"clflush\",\"acpi\",\"mmx\",\"fxsr\",\"sse\",\"sse2\",\"ss\",\"ht\",\"syscall\",\"nx\",\"lm\",\"constant_tsc\",\"pni\",\"vmx\",\"est\",\"cx16\",\"lahf_lm\"],\"model_name\":\"Intel(R) Xeon(R) CPU           L5420  @ 2.50GHz\",\"core_id\":\"0\",\"family\":\"6\",\"physical_id\":\"0\",\"vendor_id\":\"GenuineIntel\",\"mhz\":\"2500.088\",\"stepping\":\"10\",\"cache_size\":\"6144 KB\"}},\"macaddress\":\"00:D6:E5:56:10:00\",\"etc\":{\"group\":{\"uucp\":{\"gid\":14,\"members\":[]},\"dip\":{\"gid\":40,\"members\":[]},\"utmp\":{\"gid\":22,\"members\":[]},\"kmem\":{\"gid\":9,\"members\":[]},\"sys\":{\"gid\":3,\"members\":[\"root\",\"bin\"]},\"tty\":{\"gid\":5,\"members\":[]},\"nobody\":{\"gid\":99,\"members\":[]},\"nagios\":{\"gid\":102,\"members\":[]},\"lp\":{\"gid\":7,\"members\":[\"daemon\"]},\"man\":{\"gid\":15,\"members\":[]},\"lock\":{\"gid\":54,\"members\":[]},\"stratus\":{\"gid\":103,\"members\":[]},\"mail\":{\"gid\":12,\"members\":[\"mail\"]},\"haldaemon\":{\"gid\":68,\"members\":[]},\"root\":{\"gid\":0,\"members\":[\"root\"]},\"utempter\":{\"gid\":35,\"members\":[]},\"sshd\":{\"gid\":74,\"members\":[]},\"bt_admins\":{\"gid\":503,\"members\":[]},\"bin\":{\"gid\":1,\"members\":[\"root\",\"bin\",\"daemon\"]},\"wheel\":{\"gid\":10,\"members\":[\"root\"]},\"vcsa\":{\"gid\":69,\"members\":[]},\"postgres\":{\"gid\":26,\"members\":[]},\"smmsp\":{\"gid\":51,\"members\":[]},\"apache\":{\"gid\":48,\"members\":[]},\"daemon\":{\"gid\":2,\"members\":[\"root\",\"bin\",\"daemon\"]},\"news\":{\"gid\":13,\"members\":[]},\"users\":{\"gid\":100,\"members\":[]},\"dbus\":{\"gid\":81,\"members\":[]},\"disk\":{\"gid\":6,\"members\":[\"root\"]},\"floppy\":{\"gid\":19,\"members\":[]},\"rvm\":{\"gid\":500,\"members\":[\"osss\"]},\"adm\":{\"gid\":4,\"members\":[\"root\",\"daemon\"]},\"mem\":{\"gid\":8,\"members\":[]},\"ntp\":{\"gid\":38,\"members\":[]},\"mailnull\":{\"gid\":47,\"members\":[]}},\"passwd\":{\"nobody\":{\"dir\":\"/\",\"gid\":99,\"gecos\":\"Nobody\",\"uid\":99,\"shell\":\"/sbin/nologin\"},\"nagios\":{\"dir\":\"/opt/nagios\",\"gid\":102,\"gecos\":\"\",\"uid\":102,\"shell\":\"/bin/rbash\"},\"stratus\":{\"dir\":\"/home/stratus\",\"gid\":103,\"gecos\":\"\",\"uid\":103,\"shell\":\"/home/stratus/publish\"},\"mail\":{\"dir\":\"/var/spool/mail\",\"gid\":12,\"gecos\":\"mail\",\"uid\":8,\"shell\":\"/sbin/nologin\"},\"haldaemon\":{\"dir\":\"/\",\"gid\":68,\"gecos\":\"HAL daemon\",\"uid\":68,\"shell\":\"/sbin/nologin\"},\"root\":{\"dir\":\"/root\",\"gid\":0,\"gecos\":\"root\",\"uid\":0,\"shell\":\"/bin/bash\"},\"sshd\":{\"dir\":\"/var/empty/sshd\",\"gid\":74,\"gecos\":\"Privilege-separated SSH\",\"uid\":74,\"shell\":\"/sbin/nologin\"},\"osss\":{\"dir\":\"/home/osss\",\"gid\":100,\"gecos\":\"osss User\",\"uid\":500,\"shell\":\"/bin/bash\"},\"bin\":{\"dir\":\"/bin\",\"gid\":1,\"gecos\":\"bin\",\"uid\":1,\"shell\":\"/sbin/nologin\"},\"vcsa\":{\"dir\":\"/dev\",\"gid\":69,\"gecos\":\"virtual console memory owner\",\"uid\":69,\"shell\":\"/sbin/nologin\"},\"postgres\":{\"dir\":\"/var/lib/pgsql\",\"gid\":26,\"gecos\":\"PostgreSQL Server\",\"uid\":26,\"shell\":\"/bin/bash\"},\"smmsp\":{\"dir\":\"/var/spool/mqueue\",\"gid\":51,\"gecos\":\"\",\"uid\":51,\"shell\":\"/sbin/nologin\"},\"apache\":{\"dir\":\"/var/www\",\"gid\":48,\"gecos\":\"Apache\",\"uid\":48,\"shell\":\"/sbin/nologin\"},\"daemon\":{\"dir\":\"/sbin\",\"gid\":2,\"gecos\":\"daemon\",\"uid\":2,\"shell\":\"/sbin/nologin\"},\"dbus\":{\"dir\":\"/\",\"gid\":81,\"gecos\":\"System message bus\",\"uid\":81,\"shell\":\"/sbin/nologin\"},\"ntp\":{\"dir\":\"/etc/ntp\",\"gid\":38,\"gecos\":\"\",\"uid\":38,\"shell\":\"/sbin/nologin\"},\"mailnull\":{\"dir\":\"/var/spool/mqueue\",\"gid\":47,\"gecos\":\"\",\"uid\":47,\"shell\":\"/sbin/nologin\"}}},\"public_ip\":\"109.144.14.178\",\"roles\":[\"osss_frontend_test_server\",\"rails_base\"],\"platform\":\"redhat\",\"uptime_seconds\":11576,\"block_device\":{\"ram13\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram0\":{\"size\":\"32768\",\"removable\":\"0\"},\"sda1\":{\"size\":\"10485760\",\"removable\":\"0\"},\"ram14\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram1\":{\"size\":\"32768\",\"removable\":\"0\"},\"sda2\":{\"size\":\"10485760\",\"removable\":\"0\"},\"ram15\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram2\":{\"size\":\"32768\",\"removable\":\"0\"},\"md0\":{\"size\":\"0\",\"removable\":\"0\"},\"sda3\":{\"size\":\"1048576\",\"removable\":\"0\"},\"ram3\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram4\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram5\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram6\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram10\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram7\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram11\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram8\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram12\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram9\":{\"size\":\"32768\",\"removable\":\"0\"}}},\"chef_environment\":\"osss_test\",\"run_list\":[\"role[osss_frontend_test_server]\"],\"chef_type\":\"node\"}"
#puts JSON.parse(pass).class


fail = "{\"normal\":{\"databag_name\":\"somedatabag\",\"tags\":[],\"passenger\":{\"root_path\":\"/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2\",\"module_path\":\"/usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/apache2/mod_passenger.so\"},\"database\":{\"database_name\":\"rails_app\",\"database_user\":\"someuser\",\"password\":\"secret\"},\"apache\":{\"cache_dir\":\"/var/cache/httpd\",\"dir\":\"/etc/httpd\",\"binary\":\"/usr/sbin/httpd\",\"log_dir\":\"/var/log/httpd\",\"user\":\"apache\",\"icondir\":\"/var/www/icons/\"},\"application_name\":\"osss\",\"dns_hostname\":\"example.cloud21cn.com\",\"postgresql\":{\"dir\":\"/var/lib/pgsql/data\"},\"application_directory\":\"/home/rails_app/rails_app_app\"},\"name\":\"i-000FFTpR\",\"override\":{\"databag_name\":\"osss_test\",\"application_name\":\"osss\",\"application_directory\":\"/home/osss\"},\"default\":{\"rails\":{\"max_pool_size\":4,\"version\":false,\"environment\":\"production\"},\"packages\":{\"dist_only\":false},\"passenger\":{\"version\":\"3.0.2\"},\"apache\":{\"traceenable\":\"On\",\"allowed_openids\":[],\"timeout\":300,\"keepaliverequests\":100,\"contact\":\"ops@example.com\",\"servertokens\":\"Prod\",\"prefork\":{\"maxspareservers\":32,\"minspareservers\":16,\"serverlimit\":400,\"startservers\":16,\"maxclients\":400,\"maxrequestsperchild\":10000},\"listen_ports\":[\"80\",\"443\"],\"keepalivetimeout\":5,\"serversignature\":\"On\",\"keepalive\":\"On\",\"worker\":{\"maxsparethreads\":192,\"startservers\":4,\"maxclients\":1024,\"minsparethreads\":64,\"maxrequestsperchild\":0,\"threadsperchild\":64}},\"application_name\":\"app_name\",\"postgresql\":{\"ssl\":\"true\",\"version\":\"8.4\"},\"application_directory\":\"/home/app_dir\",\"app_environment\":\"production\"},\"automatic\":{\"kernel\":{\"name\":\"Linux\",\"machine\":\"x86_64\",\"modules\":{\"scsi_mod\":{\"size\":\"197337\",\"refcount\":\"1\"},\"ohci_hcd\":{\"size\":\"56053\",\"refcount\":\"0\"},\"dm_mirror\":{\"size\":\"53321\",\"refcount\":\"0\"},\"dm_multipath\":{\"size\":\"55385\",\"refcount\":\"0\"},\"pcspkr\":{\"size\":\"36289\",\"refcount\":\"0\"},\"dm_mod\":{\"size\":\"100752\",\"refcount\":\"4\"},\"jbd\":{\"size\":\"94257\",\"refcount\":\"1\"},\"xfrm_nalgo\":{\"size\":\"43333\",\"refcount\":\"1\"},\"xenblk\":{\"size\":\"50729\",\"refcount\":\"3\"},\"dm_raid45\":{\"size\":\"98897\",\"refcount\":\"0\"},\"dm_log\":{\"size\":\"44993\",\"refcount\":\"3\"},\"lp\":{\"size\":\"47121\",\"refcount\":\"0\"},\"dm_mem_cache\":{\"size\":\"39617\",\"refcount\":\"1\"},\"parport_pc\":{\"size\":\"62313\",\"refcount\":\"0\"},\"uhci_hcd\":{\"size\":\"57561\",\"refcount\":\"0\"},\"parport\":{\"size\":\"73293\",\"refcount\":\"2\"},\"dm_message\":{\"size\":\"36161\",\"refcount\":\"1\"},\"dm_region_hash\":{\"size\":\"46401\",\"refcount\":\"1\"},\"crypto_api\":{\"size\":\"42945\",\"refcount\":\"1\"},\"xennet\":{\"size\":\"61129\",\"refcount\":\"0\"},\"ipv6\":{\"size\":\"424737\",\"refcount\":\"24\"},\"scsi_dh\":{\"size\":\"41665\",\"refcount\":\"1\"},\"ext3\":{\"size\":\"168401\",\"refcount\":\"2\"},\"ehci_hcd\":{\"size\":\"65869\",\"refcount\":\"0\"}},\"os\":\"GNU/Linux\",\"version\":\"#1 SMP Wed Jan 21 09:07:41 EST 2009\",\"release\":\"2.6.18-128.el5xen\"},\"keys\":{\"ssh\":{\"host_dsa_public\":\"AAAAB3NzaC1kc3MAAACBAPToqqvmfo++9jEtbIIbYIyH14YRogY/AlYemPjzwVJtck0V3+vpRHu9CXcw5XRv/BuTNK/WROwVytKYbHClIaoA/GD0kG8Qyty8Ch/4xEm/+sm8ODc87sayGHkaSnzSxYoL1egFLGki3o4lHEoyjcEyGBBWprohhpm29IH8zoxxAAAAFQD7836a4FbbBgZS/PkbGu2RjnIs7wAAAIBJobHJt43ZfNzW9F1LsVuRT5WqSvPewRybkA9BB+2Gu8+Dly54L1r1rUo6eTwrA4Lvx5p52N+gDb8D7tfTAv9tqjRRl4lAMKpUptIs3iFM3vrH7zU9lvwjwXhpex5avM51x2y5T+Efpd0xs0sQLpHV4dwRHcK8tUU4s31AQU0EKwAAAIA2Rp6JKiIp1Rmyr6S59YSPa/WDMBTFUXsP8ibSlMwI4h/GDX77mt+9WidGaz+H0t9TMVohuVkdk4T2pSXz5Am75QRAjnLmkuPYDKaIZ16Y7S/fw57OyrVXKY5BMexGqQL76p5wSf1nQ2B8UPQh7QsE+N8llM+JKC2pbz5jxc1Gig==\",\"host_rsa_public\":\"AAAAB3NzaC1yc2EAAAABIwAAAQEAvk8czHoGeWxyp0Gy1HeyOw9LTlQthS5NJKzs0S1maCyViZVxR+Gv63EKpB+Ox1XDvBEkAvU6Z25P/7sjJ5V2W3KxSP6mXUTlX+9QYg0swkKw/lIteitiFVDk7iYM787WMkUU1+J+xA2VG76/4kCQsFz2CefBr+U8j8wIeUbOA6JqxU2bYaTXg9Vcy05e9u7aHAC6iH8zzJub3KLo9ORlbmW6bUAyS/tGmoihzmhuztmqW7tC0RuqSMLKH/o5uLAsyC5jhKeG8t692wrePMRd9KxgBimIUJgo91m8doC6g9Dffb04IwEluJKtg8rFEFvW9rCTXcNOWTl413u7Q/EF1Q==\"}},\"dmi\":{\"dmidecode_version\":\"2.7\"},\"fqdn\":\"example.cloud21cn.com\",\"platform_version\":\"5.3\",\"ipaddress\":\"10.19.218.66\",\"command\":{\"ps\":\"ps -ef\"},\"filesystem\":{\"/dev/sda1\":{\"kb_size\":\"5160576\",\"kb_available\":\"2715760\",\"mount_options\":[\"rw\"],\"percent_used\":\"45%\",\"mount\":\"/\",\"fs_type\":\"ext3\",\"kb_used\":\"2182672\"},\"/sys\":{\"mount_options\":[\"rw\"],\"mount\":\"/sys\",\"fs_type\":\"sysfs\"},\"/dev/sda2\":{\"kb_size\":\"5160576\",\"kb_available\":\"4756992\",\"mount_options\":[\"rw\"],\"percent_used\":\"3%\",\"mount\":\"/mnt\",\"fs_type\":\"ext3\",\"kb_used\":\"141440\"},\"proc\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc\",\"fs_type\":\"proc\"},\"none\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc/sys/fs/binfmt_misc\",\"fs_type\":\"binfmt_misc\"},\"/dev/root\":{\"mount_options\":[\"rw\",\"data=ordered\"],\"mount\":\"/\",\"fs_type\":\"ext3\"},\"devpts\":{\"mount_options\":[\"rw\",\"gid=5\",\"mode=620\"],\"mount\":\"/dev/pts\",\"fs_type\":\"devpts\"},\"/proc/bus/usb\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc/bus/usb\",\"fs_type\":\"usbfs\"},\"/proc\":{\"mount_options\":[\"rw\"],\"mount\":\"/proc\",\"fs_type\":\"proc\"},\"sysfs\":{\"mount_options\":[\"rw\"],\"mount\":\"/sys\",\"fs_type\":\"sysfs\"},\"rootfs\":{\"mount_options\":[\"rw\"],\"mount\":\"/\",\"fs_type\":\"rootfs\"},\"tmpfs\":{\"kb_size\":\"262144\",\"kb_available\":\"262144\",\"mount_options\":[\"rw\"],\"percent_used\":\"0%\",\"mount\":\"/dev/shm\",\"fs_type\":\"tmpfs\",\"kb_used\":\"0\"},\"/dev\":{\"mount_options\":[\"rw\"],\"mount\":\"/dev\",\"fs_type\":\"tmpfs\"}},\"counters\":{\"network\":{\"interfaces\":{\"eth0\":{\"tx\":{\"packets\":\"31820\",\"bytes\":\"2919680\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"1000\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"74157\",\"bytes\":\"94057453\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}},\"lo\":{\"tx\":{\"packets\":\"277\",\"bytes\":\"21892\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"0\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"277\",\"bytes\":\"21892\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}},\"sit0\":{\"tx\":{\"packets\":\"0\",\"bytes\":\"0\",\"collisions\":\"0\",\"errors\":\"0\",\"carrier\":\"0\",\"queuelen\":\"0\",\"overrun\":\"0\",\"drop\":\"0\"},\"rx\":{\"packets\":\"0\",\"bytes\":\"0\",\"errors\":\"0\",\"overrun\":\"0\",\"drop\":\"0\",\"frame\":\"0\"}}}}},\"idletime_seconds\":11161,\"memory\":{\"dirty\":\"356kB\",\"buffers\":\"24576kB\",\"page_tables\":\"6880kB\",\"vmalloc_used\":\"492kB\",\"high_free\":\"0kB\",\"vmalloc_chunk\":\"34359737875kB\",\"total\":\"524288kB\",\"inactive\":\"116240kB\",\"slab\":\"45044kB\",\"nfs_unstable\":\"0kB\",\"free\":\"114268kB\",\"low_total\":\"524288kB\",\"low_free\":\"114268kB\",\"vmalloc_total\":\"34359738367kB\",\"swap\":{\"total\":\"524280kB\",\"free\":\"518080kB\",\"cached\":\"1348kB\"},\"cached\":\"177928kB\",\"writeback\":\"0kB\",\"anon_pages\":\"122272kB\",\"commit_limit\":\"786424kB\",\"high_total\":\"0kB\",\"active\":\"209696kB\",\"mapped\":\"14604kB\",\"bounce\":\"0kB\",\"committed_as\":\"387584kB\"},\"os\":\"linux\",\"domain\":\"cloud21cn.com\",\"network\":{\"default_interface\":\"eth0\",\"interfaces\":{\"eth0\":{\"number\":\"0\",\"flags\":[\"UP\",\"BROADCAST\",\"RUNNING\",\"MULTICAST\"],\"addresses\":{\"10.19.218.66\":{\"netmask\":\"255.255.255.240\",\"broadcast\":\"10.19.218.79\",\"family\":\"inet\"},\"00:D6:E5:56:10:00\":{\"family\":\"lladdr\"},\"fe80::2d6:e5ff:fe56:1000\":{\"scope\":\"Link\",\"prefixlen\":\"64\",\"family\":\"inet6\"}},\"mtu\":\"1492\",\"type\":\"eth\",\"encapsulation\":\"Ethernet\",\"arp\":{\"10.19.218.65\":\"00:1e:68:c5:d6:da\"}},\"lo\":{\"flags\":[\"UP\",\"LOOPBACK\",\"RUNNING\"],\"addresses\":{\"::1\":{\"scope\":\"Node\",\"prefixlen\":\"128\",\"family\":\"inet6\"},\"127.0.0.1\":{\"netmask\":\"255.0.0.0\",\"family\":\"inet\"}},\"mtu\":\"16436\",\"encapsulation\":\"Loopback\"},\"sit0\":{\"number\":\"0\",\"mtu\":\"1480\",\"type\":\"sit\",\"encapsulation\":\"6to4\"}},\"default_gateway\":\"10.19.218.65\"},\"lsb\":{},\"virtualization\":{\"system\":\"xen\",\"role\":\"guest\"},\"idletime\":\"3 hours 06 minutes 01 seconds\",\"ohai_time\":1316004619.43795,\"chef_packages\":{\"ohai\":{\"ohai_root\":\"/usr/local/lib/ruby/gems/1.9.1/gems/ohai-0.6.4/lib/ohai\",\"version\":\"0.6.4\"},\"chef\":{\"version\":\"0.10.4\",\"chef_root\":\"/usr/local/lib/ruby/gems/1.9.1/gems/chef-0.10.4/lib\"}},\"current_user\":\"root\",\"languages\":{\"perl\":{\"version\":\"5.8.8\",\"archname\":\"x86_64-linux-thread-multi\"},\"python\":{\"version\":\"2.4.3\",\"builddate\":\"Oct 31 2008, 21:48:23\"},\"ruby\":{\"target_os\":\"linux\",\"bin_dir\":\"/usr/local/bin\",\"target_vendor\":\"unknown\",\"host_vendor\":\"unknown\",\"target_cpu\":\"x86_64\",\"ruby_bin\":\"/usr/local/bin/ruby\",\"version\":\"1.9.2\",\"host_os\":\"linux-gnu\",\"release_date\":\"2011-07-09\",\"target\":\"x86_64-unknown-linux-gnu\",\"host\":\"x86_64-unknown-linux-gnu\",\"host_cpu\":\"x86_64\",\"gems_dir\":\"/usr/local/lib/ruby/gems/1.9.1\",\"platform\":\"x86_64-linux\"}},\"os_version\":\"2.6.18-128.el5xen\",\"recipes\":[\"postgresql::server\",\"postgres_create_database\",\"admin_users\",\"sendmail::default\",\"apache2\",\"passenger_apache2\",\"git::default\",\"hardening::centos\",\"hardening::apache2\",\"rails_app_server::default\",\"osss::default\"],\"hostname\":\"example\",\"uptime\":\"3 hours 12 minutes 56 seconds\",\"cpu\":{\"real\":1,\"total\":1,\"0\":{\"model\":\"23\",\"cores\":\"1\",\"flags\":[\"fpu\",\"tsc\",\"msr\",\"pae\",\"cx8\",\"apic\",\"cmov\",\"pat\",\"clflush\",\"acpi\",\"mmx\",\"fxsr\",\"sse\",\"sse2\",\"ss\",\"ht\",\"syscall\",\"nx\",\"lm\",\"constant_tsc\",\"pni\",\"vmx\",\"est\",\"cx16\",\"lahf_lm\"],\"model_name\":\"Intel(R) Xeon(R) CPU           L5420  @ 2.50GHz\",\"core_id\":\"0\",\"family\":\"6\",\"physical_id\":\"0\",\"vendor_id\":\"GenuineIntel\",\"mhz\":\"2500.088\",\"stepping\":\"10\",\"cache_size\":\"6144 KB\"}},\"macaddress\":\"00:D6:E5:56:10:00\",\"etc\":{\"group\":{\"uucp\":{\"gid\":14,\"members\":[]},\"dip\":{\"gid\":40,\"members\":[]},\"utmp\":{\"gid\":22,\"members\":[]},\"kmem\":{\"gid\":9,\"members\":[]},\"sys\":{\"gid\":3,\"members\":[\"root\",\"bin\"]},\"tty\":{\"gid\":5,\"members\":[]},\"nobody\":{\"gid\":99,\"members\":[]},\"nagios\":{\"gid\":102,\"members\":[]},\"lp\":{\"gid\":7,\"members\":[\"daemon\"]},\"man\":{\"gid\":15,\"members\":[]},\"lock\":{\"gid\":54,\"members\":[]},\"stratus\":{\"gid\":103,\"members\":[]},\"mail\":{\"gid\":12,\"members\":[\"mail\"]},\"haldaemon\":{\"gid\":68,\"members\":[]},\"root\":{\"gid\":0,\"members\":[\"root\"]},\"utempter\":{\"gid\":35,\"members\":[]},\"sshd\":{\"gid\":74,\"members\":[]},\"bt_admins\":{\"gid\":503,\"members\":[]},\"bin\":{\"gid\":1,\"members\":[\"root\",\"bin\",\"daemon\"]},\"wheel\":{\"gid\":10,\"members\":[\"root\"]},\"vcsa\":{\"gid\":69,\"members\":[]},\"postgres\":{\"gid\":26,\"members\":[]},\"smmsp\":{\"gid\":51,\"members\":[]},\"apache\":{\"gid\":48,\"members\":[]},\"daemon\":{\"gid\":2,\"members\":[\"root\",\"bin\",\"daemon\"]},\"news\":{\"gid\":13,\"members\":[]},\"users\":{\"gid\":100,\"members\":[]},\"dbus\":{\"gid\":81,\"members\":[]},\"disk\":{\"gid\":6,\"members\":[\"root\"]},\"floppy\":{\"gid\":19,\"members\":[]},\"rvm\":{\"gid\":500,\"members\":[\"osss\"]},\"adm\":{\"gid\":4,\"members\":[\"root\",\"daemon\"]},\"mem\":{\"gid\":8,\"members\":[]},\"ntp\":{\"gid\":38,\"members\":[]},\"mailnull\":{\"gid\":47,\"members\":[]}},\"passwd\":{\"nobody\":{\"dir\":\"/\",\"gid\":99,\"gecos\":\"Nobody\",\"uid\":99,\"shell\":\"/sbin/nologin\"},\"nagios\":{\"dir\":\"/opt/nagios\",\"gid\":102,\"gecos\":\"\",\"uid\":102,\"shell\":\"/bin/rbash\"},\"stratus\":{\"dir\":\"/home/stratus\",\"gid\":103,\"gecos\":\"\",\"uid\":103,\"shell\":\"/home/stratus/publish\"},\"mail\":{\"dir\":\"/var/spool/mail\",\"gid\":12,\"gecos\":\"mail\",\"uid\":8,\"shell\":\"/sbin/nologin\"},\"haldaemon\":{\"dir\":\"/\",\"gid\":68,\"gecos\":\"HAL daemon\",\"uid\":68,\"shell\":\"/sbin/nologin\"},\"root\":{\"dir\":\"/root\",\"gid\":0,\"gecos\":\"root\",\"uid\":0,\"shell\":\"/bin/bash\"},\"sshd\":{\"dir\":\"/var/empty/sshd\",\"gid\":74,\"gecos\":\"Privilege-separated SSH\",\"uid\":74,\"shell\":\"/sbin/nologin\"},\"osss\":{\"dir\":\"/home/osss\",\"gid\":100,\"gecos\":\"osss User\",\"uid\":500,\"shell\":\"/bin/bash\"},\"bin\":{\"dir\":\"/bin\",\"gid\":1,\"gecos\":\"bin\",\"uid\":1,\"shell\":\"/sbin/nologin\"},\"vcsa\":{\"dir\":\"/dev\",\"gid\":69,\"gecos\":\"virtual console memory owner\",\"uid\":69,\"shell\":\"/sbin/nologin\"},\"postgres\":{\"dir\":\"/var/lib/pgsql\",\"gid\":26,\"gecos\":\"PostgreSQL Server\",\"uid\":26,\"shell\":\"/bin/bash\"},\"smmsp\":{\"dir\":\"/var/spool/mqueue\",\"gid\":51,\"gecos\":\"\",\"uid\":51,\"shell\":\"/sbin/nologin\"},\"apache\":{\"dir\":\"/var/www\",\"gid\":48,\"gecos\":\"Apache\",\"uid\":48,\"shell\":\"/sbin/nologin\"},\"daemon\":{\"dir\":\"/sbin\",\"gid\":2,\"gecos\":\"daemon\",\"uid\":2,\"shell\":\"/sbin/nologin\"},\"dbus\":{\"dir\":\"/\",\"gid\":81,\"gecos\":\"System message bus\",\"uid\":81,\"shell\":\"/sbin/nologin\"},\"ntp\":{\"dir\":\"/etc/ntp\",\"gid\":38,\"gecos\":\"\",\"uid\":38,\"shell\":\"/sbin/nologin\"},\"mailnull\":{\"dir\":\"/var/spool/mqueue\",\"gid\":47,\"gecos\":\"\",\"uid\":47,\"shell\":\"/sbin/nologin\"}}},\"public_ip\":\"109.144.14.178\",\"roles\":[\"osss_frontend_test_server\",\"rails_base\"],\"platform\":\"redhat\",\"uptime_seconds\":11576,\"block_device\":{\"ram13\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram0\":{\"size\":\"32768\",\"removable\":\"0\"},\"sda1\":{\"size\":\"10485760\",\"removable\":\"0\"},\"ram14\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram1\":{\"size\":\"32768\",\"removable\":\"0\"},\"sda2\":{\"size\":\"10485760\",\"removable\":\"0\"},\"ram15\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram2\":{\"size\":\"32768\",\"removable\":\"0\"},\"md0\":{\"size\":\"0\",\"removable\":\"0\"},\"sda3\":{\"size\":\"1048576\",\"removable\":\"0\"},\"ram3\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram4\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram5\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram6\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram10\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram7\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram11\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram8\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram12\":{\"size\":\"32768\",\"removable\":\"0\"},\"ram9\":{\"size\":\"32768\",\"removable\":\"0\"}}},\"chef_environment\":\"osss_test\",\"run_list\":[\"role[osss_frontend_test_server]\"],\"chef_type\":\"node\"}"
puts JSON.parse(fail).class
